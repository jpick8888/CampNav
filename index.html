<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampNav - Find Your Perfect Campground</title>
    <!-- Include Esri.js CSS -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <!-- Include Esri.js library -->
    <script src="https://js.arcgis.com/4.25/"></script>
    <!-- Custom CSS for styling -->
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { position: absolute; top: 0; right: 0; bottom: 0; left: 0; }
    </style>
</head>
<body>
    <!-- Map container -->
    <div id="map"></div>
    <!-- JavaScript for Esri.js functionality -->
    <script>
        require([
            "esri/config",
            "esri/Map",
            "esri/views/MapView",
            "esri/widgets/Search",
            "esri/layers/FeatureLayer",
            "esri/PopupTemplate",
            "esri/widgets/Editor"
        ], function(esriConfig, Map, MapView, Search, FeatureLayer, PopupTemplate, Editor) {
            esriConfig.apiKey = "AAPK6a0e40e0c7584766bd0465bfdf4e9c47A0l6-hh-vuT_78RTwWVul2CsxgjEGw0QVGUBaBJUYZ_C3oE3ps1rsei8uf5gB6HW";
            // Create a map
            const map = new Map({
                basemap: "topo-vector"
            });
            // Create a map view
            const view = new MapView({
                container: "map",
                map: map,
                center: [-96, 37.8], // Example center coordinates
                zoom: 4 // Example zoom level
            });
            // Add a search widget
            const searchWidget = new Search({
                view: view
            });
            view.ui.add(searchWidget, {
                position: "top-left",
                index: 0
            });
            // Define campground feature layer URL
            const campgroundLayerUrl = "https://services7.arcgis.com/ZVNY4kBjkOFe2xT8/arcgis/rest/services/FloridaStParkCamping/FeatureServer";
            
            // Define the custom symbol for the campground points
            const campgroundSymbol = {
                type: "picture-marker",
                url: "camping_icon.png", // Path to your custom icon
                width: "14px",
                height: "14px"
            };

            // Create the campground feature layer with the custom symbol
            const campgroundLayer = new FeatureLayer({
                url: campgroundLayerUrl,
                outFields: ["*"],
                renderer: {
                    type: "simple", // Use a simple renderer
                    symbol: campgroundSymbol // Apply the custom symbol
                },
                popupTemplate: {
                    title: "{SITE_NAME}",
                    content: [
                        "<b>Type:</b> {TYPE}<br>",
                        "<b>Reservable:</b> {RESERVABLE}<br>",
                        "<b>Fire Pit:</b> {FIRE_PIT}<br>",
                        "<b>URL:</b> {URL}<br>"
                        // Add more attributes as needed
                    ].join("")
                }
            });

            // Add the campground layer to the map
            map.add(campgroundLayer);

            const airportIconSymbol = {
							type: "picture-marker",
							url: "flight_takeoff_FILL0_wght400_GRAD0_opsz24.png",
							width: "32px",
							height: "32px"
			};

			// Update the renderer for myAirports layer
			const airportIconRenderer = {
							type: "simple",
							symbol: airportIconSymbol
			};

                        // Event listener for search
                        searchWidget.on("select-result", function(event) {
                            // Zoom to the selected campground
                            view.goTo({
                                target: event.result.extent,
                                zoom: 12
                            });
                        });
            //adding the const for the feature layer
            const myCampsites = new FeatureLayer({
            url: "https://services.arcgis.com/LBbVDC0hKPAnLRpO/arcgis/rest/services/Camp_Sites/FeatureServer",
            
            //adding the popup here
            outFields: ["Campsites"],
            

            });

            //adding the feature layer to the map
            map.add(myCampsites);

            // Set the point layer's LayerInfo
            const pointInfos = {
            layer: myCampsites
            }

            // Begin Editor constructor
            const editor = new Editor({
            view: view,
            layerInfos: [pointInfos]
            }); // End Editor constructor

            // Add the widget to the view
            view.ui.add(editor, "top-right");

        });
    </script>
</body>
</html>
